{% block header_wrapper %}
<header class="navbar navbar-static-top masthead">
  <div class="container">
    <div class="navbar-right" style="display: flex; align-items: center; gap: 15px;">
      {% if c.userobj %}
        <div class="account avatar authed" data-module="me" data-me="{{ c.userobj.id }}">
          <ul class="list-unstyled" style="margin-bottom:0;">
            <li>
              <a href="{{ h.url_for('user.read', id=c.userobj.name) }}" class="image">
                {{ h.user_image((c.user if c and c.user else ''), size=22) }}
                <span class="username">{{ c.userobj.display_name }}</span>
              </a>
            </li>
            <li><a href="{{ h.url_for('dashboard.index') }}"><i class="fa fa-tachometer"></i> Dashboard</a></li>
            <li><a href="{{ h.url_for('/user/_logout') }}"><i class="fa fa-sign-out"></i> Keluar</a></li>
          </ul>
        </div>
      {% endif %}
      <button data-target="#main-navigation-toggle" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="fa fa-bars"></span>
      </button>
    </div>

    <!-- Logo -->
    <hgroup class="{{ g.header_class }} navbar-left">
      {% if g.site_logo %}
        <a class="logo" href="{{ h.url_for('home.index') }}">
          <img src="{{ h.url_for_static_or_external(g.site_logo) }}" alt="{{ g.site_title }}" />
        </a>
      {% else %}
        <h1><a href="{{ h.url_for('home.index') }}">{{ g.site_title }}</a></h1>
      {% endif %}
    </hgroup>

    <!-- Navigation -->
    <div class="collapse navbar-collapse" id="main-navigation-toggle">
      <nav class="section navigation">
        <ul class="nav nav-pills">
          {{ h.build_nav_main(
            ('dataset.search', _('Dataset')),
            ('organization.index', _('OPD')),
            ('group.index', _('Kategori')),
            ('home.about', _('Tentang'))
          ) }}
          {% if not c.userobj %}
            <li>{% link_for _('Login'), named_route='user.login' %}</li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
</header>

<!-- ðŸ”¹ CSS Modern (Solid Header) -->
<style>
  /* Header solid dari awal */
  header.masthead {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1030;
    background: #0d6efd; /* biru solid */
    padding: 15px 0;
    transition: all 0.3s ease;
  }

  /* Supaya konten tidak ketimpa */
  body {
    padding-top: 90px;
  }

  /* Saat scroll â†’ header lebih kecil + shadow */
  header.masthead.scrolled {
    padding: 8px 0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  /* Logo shrink */
  header.masthead img {
    max-height: 65px;
    transition: max-height 0.3s ease, transform 0.3s ease;
  }
  header.masthead.scrolled img {
    max-height: 45px;
    transform: scale(0.95);
  }

  /* Style menu */
  header.masthead .nav > li > a {
    color: #fff !important;
    font-weight: 500;
    transition: color 0.3s ease;
  }
  header.masthead .nav > li > a:hover {
    color: #ffd54f !important;
  }
</style>

<!-- ðŸ”¹ JS Scroll -->
<script>
  window.addEventListener("scroll", function() {
    const header = document.querySelector("header.masthead");
    if (header) {
      header.classList.toggle("scrolled", window.scrollY > 50);
    }
  });
</script>
{% endblock %}
